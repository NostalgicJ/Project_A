# 화장품 성분 조합 분석 AI 프로젝트 - 발표 자료

## 📊 프로젝트 개요

### 1. 문제 정의

**현재 상황:**
- 많은 화장품 제품들이 다양한 성분을 포함
- 성분 간 상호작용에 대한 정확한 정보 부족
- 일반 소비자가 성분 조합의 안전성을 판단하기 어려움
- 전문가 검수가 필요한 복잡한 조합 분석

**해결 방안:**
- AI 기반 자동 성분 조합 분석 시스템 개발
- 위험한 조합 경고 및 시너지 효과 추천
- 실시간 제품 검색 및 비교 분석

### 2. 시스템 구조

```
┌─────────────────────────────────────────────────────────┐
│                   데이터 수집 계층                        │
├─────────────────────────────────────────────────────────┤
│  공공데이터 API  │  올리브영 스크래핑  │  수동 검수 데이터  │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│                  데이터 전처리 계층                       │
├─────────────────────────────────────────────────────────┤
│  제품명 정제  │  성분 정규화  │  기획상품 분리  │  검수   │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│                   분석 모델 계층                          │
├─────────────────────────────────────────────────────────┤
│  규칙기반 모델  │  딥러닝 모델  │  제품 간 조합 분석      │
└─────────────────────────────────────────────────────────┘
                           ↓
┌─────────────────────────────────────────────────────────┐
│                     서비스 계층                           │
├─────────────────────────────────────────────────────────┤
│  제품 검색  │  성분 분석  │  조합 분석  │  추천 시스템     │
└─────────────────────────────────────────────────────────┘
```

### 3. 전체 워크플로우

```
[1단계] 데이터 수집
    ├─ 공공데이터 포털 API (전체 성분 DB)
    ├─ 올리브영 제품 크롤링
    └─ 전문가 검수 데이터

[2단계] 데이터 전처리
    ├─ 제품명 정제 (기획, 증정 등 키워드 제거)
    ├─ 성분 정규화 (공공DB 매칭)
    ├─ 기획 상품 자동 감지 및 분리
    └─ 미확인 성분 수동 검수

[3단계] 데이터 검수 및 수정
    ├─ 기획 상품 수동 분리
    ├─ 미확인 성분 수정
    └─ 성분 규칙 설정

[4단계] 모델 학습
    ├─ 규칙 기반 모델 구축
    ├─ 딥러닝 모델 학습
    └─ 제품 간 조합 분석 모델

[5단계] 서비스 배포
    ├─ FastAPI 서버
    ├─ RESTful API
    └─ 웹 인터페이스
```

## 📈 상세 내용

### 1. 데이터 수집 (Data Collection)

#### 1-1. 공공데이터 포털 API
```python
# 식품의약품안전처 화장품 원료정보
- API 엔드포인트: 식품의약품안전처 화장품 원료정보
- 데이터: 2,000+ 화장품 원료 성분
- 포함 정보: 한글명, 영문명(INCI), CAS번호, 용도, 제한사항
- 특징: 최초 1회 다운로드 후 로컬 저장
```

#### 1-2. 올리브영 제품 데이터
```python
# 크롤링 범위
- 카테고리: 스킨, 토너, 에센스, 크림, 세럼 등
- 제품 수: 2,000+ 제품
- 수집 정보: 브랜드, 제품명, 성분 리스트, URL
```

### 2. 데이터 전처리 (Data Preprocessing)

#### 2-1. 제품명 정제
```
원본: [기획] 더블 세트 A + B 증정
정제: A, B (개별 제품으로 분리)

제거 키워드:
- 기획, 증정, 연예인 PICK
- 할인율, 이벤트 정보
- 미용용품 관련 부가 정보
```

#### 2-2. 성분 정규화
```python
# 성분 매칭 과정
1. 공공DB와 정확히 일치하는 성분 → "확인됨"
2. 유사도가 높은 성분 → "유사 매칭"
3. 매칭되지 않는 성분 → "미확인" (수동 검수 필요)

# 예시
원본: "Ascorbic Acid"
매칭: "아스코빅애씨드" ✅
```

#### 2-3. 기획 상품 처리
```python
# 자동 감지
- 제품명 패턴 분석
- 성분 리스트 복잡도
- 키워드 매칭

# 수동 검수
- 기획 상품 CSV 파일 생성
- 전문가 검수를 통한 개별 제품 분리
- 자동 반영
```

### 3. 모델 구조 (Model Architecture)

#### 3-1. 규칙 기반 모델

```
입력: 성분 리스트
  ↓
[성분 계열 분류]
  ├─ 비타민C계열: 아스코빅애씨드, ...
  ├─ 레티놀계열: 레티놀, 레티놀아세테이트, ...
  └─ AHA계열: 글라이콜릭애씨드, 젖산, ...
  ↓
[위험 조합 규칙 적용]
  ├─ 비타민C계열 + 레티놀계열: pH 불일치 (위험도 0.9)
  ├─ AHA계열 + 레티놀계열: 과도한 각질 제거 (위험도 0.8)
  └─ 비타민C계열 + 비타민E계열: 시너지 효과 (시너지 0.8)
  ↓
출력: 위험도 점수, 시너지 점수, 상세 설명
```

**장점:**
- 빠른 분석 속도
- 해석 가능한 결과
- 전문가 지식 직접 반영

#### 3-2. 딥러닝 모델

```
입력: 성분 쌍 (ingredient1, ingredient2)
  ↓
[임베딩 레이어]
  └─ 성분 → 128차원 벡터
  ↓
[상호작용 분석 네트워크]
  ├─ Linear (256 → 128)
  ├─ ReLU + Dropout (0.3)
  ├─ Linear (128 → 64)
  └─ ReLU + Dropout (0.2)
  ↓
[출력 헤드]
  ├─ 위험도 예측 (Sigmoid)
  ├─ 시너지 예측 (Sigmoid)
  └─ 3-class 분류 (안전/주의/위험)
  ↓
출력: {위험도, 시너지, 분류, 근거}
```

**장점:**
- 높은 정확도
- 숨겨진 패턴 발견
- 복잡한 상호작용 학습

#### 3-3. 제품 간 조합 분석 모델

```
제품 A (성분 20개)         제품 B (성분 30개)
      ↓                          ↓
[임베딩 & 집계]            [임베딩 & 집계]
      ↓                          ↓
  제품 A 표현              제품 B 표현
      └────────┬─────────┘
               ↓
      [상호작용 분석]
               ↓
  위험도 + 시너지 점수
               ↓
        종합 평가
```

**핵심 기능:**
- 다중 성분 동시 비교
- 제품 레벨 분석
- 사용자 맞춤 추천

### 4. 학습 방법 (Training Process)

#### 4-1. 데이터 준비
```python
# 1. 성분 어휘 사전 구축
- unique 성분 추출
- 인덱스 매핑
- 총 1,500+ 성분

# 2. 학습 데이터 생성
- 성분 쌍 생성: N × M 조합
- 라벨링: 0(안전), 1(주의), 2(위험)
- 규칙 기반 라벨링 + 확장
```

#### 4-2. 모델 학습
```python
# 하이퍼파라미터
- embedding_dim: 128
- hidden_dim: 256
- learning_rate: 0.001
- batch_size: 32
- epochs: 50

# 손실 함수
- 분류: CrossEntropyLoss
- 회귀: MSELoss
```

#### 4-3. 평가 지표
```
정확도 (Accuracy): 85%+
F1 Score: 0.80+
ROC AUC: 0.85+
```

### 5. 사용 방법 (Usage)

#### 5-1. API 사용 예시

```python
# 1. 제품 검색
POST /search/products
{
    "query": "비타민C 세럼"
}

# 2. 성분 조합 분석
POST /analyze/ingredients
{
    "ingredients": ["아스코빅애씨드", "레티놀"]
}

# 3. 제품 간 조합 분석
POST /analyze/products
{
    "product_a_id": 123,
    "product_b_id": 456
}

# 4. 성분 추천
POST /recommend/ingredients
{
    "current_ingredients": ["히알루론산"]
}
```

#### 5-2. 결과 예시

```json
{
    "analysis_result": {
        "overall_assessment": "위험",
        "danger_score": 0.9,
        "synergy_score": 0.1,
        "details": [
            {
                "combination": "비타민C계열 + 레티놀계열",
                "danger_level": 0.9,
                "reason": "pH 불일치로 효과 상쇄",
                "recommendation": "시차 사용 권장"
            }
        ]
    }
}
```

## 📊 성과 및 활용

### 1. 데이터 통계
- 제품 수: 2,000+ 개
- 성분 수: 1,500+ 개
- 분석된 조합: 100,000+ 개
- 위험 조합 감지: 500+ 개

### 2. 활용 사례
1. **소비자**: 제품 구매 전 성분 조합 확인
2. **브랜드**: 제품 개발 시 성분 조합 검토
3. **약사/미용 전문가**: 고객 상담 지원
4. **연구소**: 새로운 조합 패턴 발견

### 3. 향후 계획
- 모델 정확도 향상 (90%+)
- 추가 성분 정보 수집
- 모바일 앱 개발
- 다국어 지원

## 🎯 핵심 포인트

1. **실용성**: 실제 사용 가능한 제품 2,000+ 개 분석
2. **정확성**: 전문가 지식 + 딥러닝 결합
3. **확장성**: 새로운 성분과 규칙 추가 용이
4. **투명성**: 분석 근거 제공
5. **자동화**: 수동 검수 최소화

## 📝 발표 팁

### 강조할 내용
1. **문제 해결**: 소비자의 실제 니즈 해결
2. **기술적 우수성**: 규칙 + 딥러닝 결합
3. **실용성**: 즉시 사용 가능한 시스템
4. **확장 가능성**: 성분 규칙 추가로 지속 개선

### 데모 시나리오
1. 비타민C 세럼 + 레티놀 크림 조합 → 위험 경고
2. 히알루론산 + 세라마이드 조합 → 시너지 효과
3. 제품 검색 및 비교 기능
4. 개인화된 성분 추천
