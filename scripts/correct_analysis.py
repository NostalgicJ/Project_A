#!/usr/bin/env python3
"""
ì˜¬ë°”ë¥¸ ì„±ë¶„ ì¡°í•© ë¶„ì„ - ë¹„íƒ€ë¯¼Cì™€ ë ˆí‹°ë†€ì˜ ìœ„í—˜í•œ ì¡°í•©
"""
import sys
import os
sys.path.append('src')

from models.ingredient_analyzer import CosmeticIngredientAnalyzer

def correct_analysis():
    print("âš ï¸ ì˜¬ë°”ë¥¸ ì„±ë¶„ ì¡°í•© ë¶„ì„ - ë¹„íƒ€ë¯¼Cì™€ ë ˆí‹°ë†€")
    print("=" * 60)
    
    # ë¶„ì„ê¸° ì´ˆê¸°í™”
    analyzer = CosmeticIngredientAnalyzer()
    
    # ìœ„í—˜í•œ ì¡°í•© í…ŒìŠ¤íŠ¸
    dangerous_combinations = [
        {
            "name": "êµ¬ë‹¬ ì²­ê·¤ ë¹„íƒ€ë¯¼C ì„¸ëŸ¼ + ë ˆí‹°ë†€ í¬ë¦¼",
            "ingredients": [
                # êµ¬ë‹¬ ì²­ê·¤ ë¹„íƒ€ë¯¼C ì„¸ëŸ¼ì˜ ì‹¤ì œ ì„±ë¶„
                "3-O-ì—í‹¸ì•„ìŠ¤ì½”ë¹…ì• ì”¨ë“œ",  # ë¹„íƒ€ë¯¼C ìœ ë„ì²´
                "ì•„ìŠ¤ì½”ë¹…ì• ì”¨ë“œ",  # ë¹„íƒ€ë¯¼C
                "ì•„ìŠ¤ì½”ë¹Œê¸€ë£¨ì½”ì‚¬ì´ë“œ",  # ë¹„íƒ€ë¯¼C ìœ ë„ì²´
                "ì•„ìŠ¤ì½”ë¹ŒíŒ”ë¯¸í…Œì´íŠ¸",  # ë¹„íƒ€ë¯¼C ìœ ë„ì²´
                # ë ˆí‹°ë†€ í¬ë¦¼ì˜ ì„±ë¶„
                "ë ˆí‹°ë†€",  # ë ˆí‹°ë†€
                "ë ˆí‹°ë‹íŒ”ë¯¸í…Œì´íŠ¸",  # ë ˆí‹°ë†€ ìœ ë„ì²´
                # ê¸°íƒ€ ì„±ë¶„ë“¤
                "íˆì•Œë£¨ë¡ ì‚°",
                "ì„¸ë¼ë§ˆì´ë“œ",
                "ë‚˜ì´ì•„ì‹ ì•„ë§ˆì´ë“œ"
            ],
            "description": "ë¹„íƒ€ë¯¼Cì™€ ë ˆí‹°ë†€ì„ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ìœ„í—˜í•œ ì¡°í•©"
        },
        {
            "name": "ë¹„íƒ€ë¯¼C ë‹¨ë… ì‚¬ìš©",
            "ingredients": [
                "ì•„ìŠ¤ì½”ë¹…ì• ì”¨ë“œ",
                "ì•„ìŠ¤ì½”ë¹Œê¸€ë£¨ì½”ì‚¬ì´ë“œ", 
                "íˆì•Œë£¨ë¡ ì‚°",
                "ì„¸ë¼ë§ˆì´ë“œ"
            ],
            "description": "ë¹„íƒ€ë¯¼Cë§Œ ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì•ˆì „í•œ ê²½ìš°"
        },
        {
            "name": "ë ˆí‹°ë†€ ë‹¨ë… ì‚¬ìš©",
            "ingredients": [
                "ë ˆí‹°ë†€",
                "ë ˆí‹°ë‹íŒ”ë¯¸í…Œì´íŠ¸",
                "íˆì•Œë£¨ë¡ ì‚°",
                "ì„¸ë¼ë§ˆì´ë“œ"
            ],
            "description": "ë ˆí‹°ë†€ë§Œ ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì•ˆì „í•œ ê²½ìš°"
        }
    ]
    
    for i, case in enumerate(dangerous_combinations, 1):
        print(f"\nğŸ” í…ŒìŠ¤íŠ¸ {i}: {case['name']}")
        print(f"ì„¤ëª…: {case['description']}")
        
        # ì„±ë¶„ ì¡°í•© ë¶„ì„
        result = analyzer.analyze_combination(case['ingredients'])
        
        print(f"\nğŸ“Š ë¶„ì„ ê²°ê³¼:")
        print(f"  ğŸ¯ ë¶„ë¥˜: {result['predicted_class']}")
        print(f"  ğŸ“ˆ ì‹ ë¢°ë„: {result['confidence']:.1%}")
        print(f"  ğŸ›¡ï¸ ì•ˆì „ì„± ì ìˆ˜: {result['safety_score']:.1%}")
        print(f"  âœ¨ ì‹œë„ˆì§€ ì ìˆ˜: {result['synergy_score']:.1%}")
        print(f"  ğŸ’¡ ë¶„ì„: {result['analysis']}")
        
        # ì•ˆì „ì„± ì´ìŠˆ í‘œì‹œ
        if 'safety_issues' in result and result['safety_issues']:
            print(f"\nâš ï¸ ì£¼ì˜ì‚¬í•­:")
            for issue in result['safety_issues']:
                print(f"    â€¢ {issue}")
        
        # ì‹œë„ˆì§€ íš¨ê³¼ í‘œì‹œ
        if 'synergy_benefits' in result and result['synergy_benefits']:
            print(f"\nâœ¨ ì‹œë„ˆì§€ íš¨ê³¼:")
            for benefit in result['synergy_benefits']:
                print(f"    â€¢ {benefit}")
        
        # ì „ë¬¸ê°€ ì¡°ì–¸
        if case['name'] == "êµ¬ë‹¬ ì²­ê·¤ ë¹„íƒ€ë¯¼C ì„¸ëŸ¼ + ë ˆí‹°ë†€ í¬ë¦¼":
            print(f"\nğŸš¨ ì „ë¬¸ê°€ ê²½ê³ :")
            print(f"    âš ï¸ ë¹„íƒ€ë¯¼Cì™€ ë ˆí‹°ë†€ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤!")
            print(f"    ğŸ”¬ ì´ìœ : pH ë¶ˆì¼ì¹˜ë¡œ íš¨ê³¼ê°€ ìƒì‡„ë˜ê³  í”¼ë¶€ ìê·¹ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
            print(f"    ğŸ’¡ ê¶Œì¥ì‚¬í•­:")
            print(f"        - ì•„ì¹¨: ë¹„íƒ€ë¯¼C ì„¸ëŸ¼ ì‚¬ìš©")
            print(f"        - ì €ë…: ë ˆí‹°ë†€ í¬ë¦¼ ì‚¬ìš©")
            print(f"        - ìµœì†Œ 12ì‹œê°„ ê°„ê²© ìœ ì§€")
            print(f"        - ìˆœì„œ: ì„¸ëŸ¼ â†’ í¬ë¦¼")
        
        print("-" * 60)
    
    # ì˜¬ë°”ë¥¸ ì‚¬ìš©ë²• ì•ˆë‚´
    print(f"\nğŸ“š ì˜¬ë°”ë¥¸ í™”ì¥í’ˆ ì‚¬ìš©ë²•:")
    print("=" * 40)
    print("ğŸŒ… ì•„ì¹¨ ë£¨í‹´:")
    print("  1. í´ë Œì§•")
    print("  2. êµ¬ë‹¬ ì²­ê·¤ ë¹„íƒ€ë¯¼C ì„¸ëŸ¼")
    print("  3. ë³´ìŠµ í¬ë¦¼")
    print("  4. ì„ í¬ë¦¼ (í•„ìˆ˜!)")
    print()
    print("ğŸŒ™ ì €ë… ë£¨í‹´:")
    print("  1. í´ë Œì§•")
    print("  2. ë ˆí‹°ë†€ í¬ë¦¼")
    print("  3. ë³´ìŠµ í¬ë¦¼")
    print()
    print("âš ï¸ ì£¼ì˜ì‚¬í•­:")
    print("  - ë¹„íƒ€ë¯¼Cì™€ ë ˆí‹°ë†€ì„ ê°™ì€ ì‹œê°„ì— ì‚¬ìš© ê¸ˆì§€")
    print("  - ì²˜ìŒ ì‚¬ìš© ì‹œ ì†ŒëŸ‰ë¶€í„° ì‹œì‘")
    print("  - í”¼ë¶€ ìê·¹ ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨")
    print("  - ì„ í¬ë¦¼ì€ í•„ìˆ˜!")

if __name__ == "__main__":
    correct_analysis()



